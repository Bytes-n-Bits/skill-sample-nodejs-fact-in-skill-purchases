# プレミアムトリビア - スキル内課金を使ったスキルの作成
<img src="https://m.media-amazon.com/images/G/01/mobile-apps/dex/alexa/alexa-skills-kit/tutorials/quiz-game/header._TTH_.png" />

# スキル内商品の作成

このガイドの [1ページ目](./voice-user-interface.md) では、音声ユーザーインターフェイスの対話モデルを作成しました。 [2ページ目](./lambda-function.md) では、スキルのロジックを定義する Lambda 関数を作成しました。 そして [3ページ目](./connect-vui-to-code.md) ではそれら2つを接続することを行いました。 今回は、ユーザーが購入できるスキル内商品を作成します。

このサンプルでは、4つのスキル内商品を使います -- そのうちの3つは買い切り型の商品で、残りの1つはサブスクリプション型の商品です。 このサンプルの体験をフルに経験するには、4つすべてのスキル内商品を作成するのがよいですが、一部だけの商品を作成しても大丈夫です。 作成した商品とスキルがリンクするように留意してください。

1. 開発者コンソールの **ビルド** タブで、左側の **スキル内商品** セクションをクリックして、マネタイゼーションツールを開きます。
2. 画面右上の **スキル内商品を作成** をクリックします。
3. スキル内商品の参照名を入力します。これはコードからスキル内商品を参照するための識別子です。スペースや特殊記号を含まない英語名で入力します。このサンプルのコードでは、`complete` という参照名を想定しています。
    > 全ての参照名を指定どおり正確に入力するように注意してください。これらの名前はサンプルコードから利用するため、一致しないとサンプルコードが動作しません。
4. スキル内商品の種類を選択では、**サブスクリプション型** を選択します。
5. 画面右上の **スキル内商品を作成** ボタンをクリックします。
6. **サポートされる言語** の下の **新しい言語を追加** をクリックします。
7. **日本語(日本)** を選択します。
8. サブスクリプションの詳細情報を以下のように入力します。
   
    項目|説明|サンプル値
    ---|----|--------
    **表示名**|この商品の表示名。 ユーザーはこの名前を見たり聞いたりします。| コンプリート|
    **説明**| 商品の簡単な説明。 ユーザーはこの説明を聞くことになります。| コンプリートでは、歴史・科学・宇宙に加えて、今後追加されるジャンルのトリビアも聞くことができます。|
    **詳細な説明**| 商品の機能や使用要件など詳細な説明。 ユーザーはこの説明を見ます。| コンプリートでは、歴史・科学・宇宙に加えて、今後追加されるジャンルのトリビアも聞くことができます。|
    **小さいアイコン**| スキルストアや Alexa アプリで商品表示に利用する小さいアイコン。  もしお持ちでなければ、このプレースフォルダーアイコンを利用することもできます。| https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_108.png|
    **大きいアイコン**| スキルストアや Alexa アプリで商品表示に利用する大きいアイコン。 もしお持ちでなければ、この代用アイコンを利用することもできます。| https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_512.png|
    **購入プロンプトの説明**| 商品を購入したりサブスクリプションをキャンセルするときにユーザーが聞く商品の説明。| コンプリートでは、歴史・科学・宇宙に加えて、今後追加されるジャンルのトリビアも聞くことができます。|
    **購入確認の説明**| Alexa アプリのスキルカードで表示される商品の説明。ユーザーはこれを目にします。| コンプリートを購入いただきありがとうございました。あらゆるトリビアをお楽しみください！|
    > ISPやスキルのアイコン作成にお困りなら、[Alexa Skill Icon Builder](https://developer.amazon.com/docs/tools/icon-builder.html) を参照してください。

9. **保存** をクリックします。
10. **価格設定と購入可能状況** セクションを設定します。このサンプルスキルでは、購入可能状況は amazon.co.jp、価格は100円 (JPY)を、税金のカテゴリーでは **ソフトウェア** を選択します。実際の商品にはどの選択を使うべきか、税務の専門家に相談してください。税金のカテゴリーに指定できるオプションは [ここ](https://developer.amazon.com/docs/in-skill-purchase/create-isp-dev-console.html#tax-category) にリストされています。
11. **請求** のセクションを設定します。請求の頻度は**毎月**、試用期間は7日に設定します。必要に応じて変更してください。
12. **テスト**のセクションは、審査チームがスキル内商品を見つけたりテストするために、テスト手順を提供します。
, 毎月, 7日間トライアル, リリース日 "本日" で大丈夫ですが、必要に応じて変更することもできます。
13. **保存して続行** をクリックしてください。
14. 通常、審査チームがスキル内商品を見つけたりテストするために、テスト手順を提供します。(ここでは、**認定** タブで指定する一般的なスキルのテスト手順とは別に、このスキル内商品に特化したテスト手順を入力します。) ここでは、ひとまずブランクのままとします。
15. 画面右上の**保存**ボタンをクリックします。
16. 必要な情報がすべて正しく入力されてると、スキルにスキル内商品をリンクさせるための **スキルへのリンク** がクリックできるはずです。そうでない場合、**継続** をクリックして不足している情報を補ってください。
17. お疲れ様でした! 以上で、スキルにサブスクリプションが追加できました。
18. 次に、サブスクリプション商品と同様の手順で、３つの買い切り型商品を登録します。以下の表を使って必要な情報を入力してください。記載のない値（価格など）は任意に設定してください。**特に参照名のスペルは間違えないように注意してください。**

    項目|歴史パックの値|科学パックの値|宇宙パックの値
    -----|---|----|----
    **参照名**| `history` | `science` |  `space`
    **スキル内商品タイプ** | 買い切り型 | 買い切り型 | 買い切り型
    **表示名**| 歴史パック | 科学パック | 宇宙パック
    **説明** | 歴史パックでは歴史に関するトリビアを聞くことができます。| 科学パックでは科学に関するトリビアを聞くことができます。| 宇宙パックでは宇宙に関するトリビアを聞くことができます。
    **詳細な説明**| 歴史パックでは歴史に関するトリビアを聞くことができます。 | 科学パックでは科学に関するトリビアを聞くことができます。 | 宇宙パックでは宇宙に関するトリビアを聞くことができます。
    **小さいアイコン** (Placeholder)| https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_108.png | https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_108.png | https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_108.png 
    **大きいアイコン** (Placeholder) | https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_512.png | https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_512.png | https://s3.amazonaws.com/ask-samples-resources/icons/moneyicon_512.png
    **購入プロンプトの説明**| 歴史パックでは歴史に関するトリビアを聞くことができます。 | 科学パックでは科学に関するトリビアを聞くことができます。 | 宇宙パックでは宇宙に関するトリビアを聞くことができます。
    **購入確認の説明**| 歴史パックを購入いただきありがとうございました。歴史トリビアをお楽しみください！ | 科学パックを購入いただきありがとうございました。科学トリビアをお楽しみください！ | 宇宙パックを購入いただきありがとうございました。宇宙トリビアをお楽しみください！

    > このサンプルスキルでは、これらの値のままで大丈夫ですが、実際のスキル内商品を作成するときには、独自のアイコンなど各設定値は適切に入力してください。サンプルの値のままだと審査には通過できないでしょう。

お疲れ様でした!  以上でサンプルスキルのためのスキル内商品を追加することができました。早速テストしてみましょう。

> スキル内商品のページから離れる前に、**テスト購入をリセット** というリンクがあることを覚えておいてください。テストで購入した商品をリセットするとき、これらのリンクを使います。

[![Next](./next.png)](./4-testing.md)
